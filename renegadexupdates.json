[
    {
        "UpdateStageName":"Patcher Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"GithubRelease",
        "UpdateSourceArgs":"pminten/totemarts-patcher-cli",
        "UpdateSourceData":"tapatcher.exe",
        "UpdateSourceTarget":"{{$FullRootDir}}",
        "OverwriteExistingFiles":true
    },
    {
        "UpdateStageName":"Patcher Download",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"GithubRelease",
        "UpdateSourceArgs":"pminten/totemarts-patcher-cli",
        "UpdateSourceData":"tapatcher",
        "UpdateSourceTarget":"{{$FullRootDir}}",
        "OverwriteExistingFiles":true
    },
    {
        "UpdateStageName":"Xdelta Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"GithubRelease",
        "UpdateSourceArgs":"jmacd/xdelta-gpl",
        "UpdateSourceData":"xdelta3-3.1.0-x86_64.exe.zip",
        "UpdateSourceTarget":"{{$FullRootDir}}",
        "UnzipUpdateSource":true,
        "OverwriteExistingFiles":true,
        "DeleteAfterExtract":true
    },
    {
        "UpdateStageName":"Xdelta Download",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"GithubRelease",
        "UpdateSourceArgs":"jmacd/xdelta-gpl",
        "UpdateSourceData":"xdelta3-3.1.0.tar.gz",
        "UpdateSourceTarget":"{{$FullRootDir}}",
        "UnzipUpdateSource":true,
        "OverwriteExistingFiles":true,
        "DeleteAfterExtract":true
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"Executable",
        "UpdateSourceData":"cmd.exe",
        "UpdateSourceArgs":"/C cd renegadex && tapatcher.exe update renegade_x .\\server -X .\\xdelta3-3.1.0-x86_64.exe --progress-mode=plain",
        "SkipOnFailure":false
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"Executable",
        "UpdateSourceData":"/bin/bash",
        "UpdateSourceArgs":"-c \"cd renegadex && chmod +x tapatcher && ./tapatcher update renegade_x ./server -X ./xdelta3-3.1.0-x86_64 --progress-mode=plain\"",
        "SkipOnFailure":false
    },
    {
        "UpdateStageName":"Initialise Wine",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"Executable",
        "UpdateSourceData":"/bin/bash",
        "UpdateSourceArgs":"-c \"WINEPREFIX=\\\"{{$FullRootDir}}.wine\\\" WINEARCH=win64 WINEDEBUG=-all /usr/bin/wineboot --init --update\""
    },
    {
        "UpdateStageName":"Install Windows Components",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"Executable",
        "UpdateSourceData":"/bin/bash",
        "UpdateSourceArgs":"-c \"cd renegadex && wget -q -N https://raw.githubusercontent.com/Winetricks/winetricks/master/src/winetricks && chmod +x winetricks; wget -q -N https://dl.winehq.org/wine/wine-mono/5.0.0/wine-mono-5.0.0-x86.msi; export WINEPREFIX=\\\"{{$FullRootDir}}.wine\\\"; export WINEARCH=win64; /usr/bin/wine msiexec /i wine-mono-5.0.0-x86.msi > winescript_log.txt 2>&1; ./winetricks dotnet46 >> winescript_log.txt 2>&1; ./winetricks sound=disabled >> winescript_log.txt 2>&1\""
    }
]
