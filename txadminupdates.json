[
    {
        "UpdateStageName":"Create Server Directory",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CreateDirectory",
        "UpdateSourceArgs":"{{$FullBaseDir}}server",
        "OverwriteExistingFiles":false
    },
    {
        "UpdateStageName":"Create Data Directory",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CreateDirectory",
        "UpdateSourceArgs":"{{$FullBaseDir}}server-data",
        "OverwriteExistingFiles":false
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"FetchURLFromJQ",
        "UpdateSourceData":"https://changelogs-live.fivem.net/api/changelog/versions/win32/server",
        "UpdateSourceArgs":"$.recommended_download",
        "UpdateSourceTarget":"{{$FullBaseDir}}server",
        "UnzipUpdateSource":true,
        "OverwriteExistingFiles":true,
        "DeleteAfterExtract":true,
        "UpdateSourceConditionSetting":"ServerBuild",
        "UpdateSourceConditionValue":"recommended_download"
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"FetchURLFromJQ",
        "UpdateSourceData":"https://changelogs-live.fivem.net/api/changelog/versions/linux/server",
        "UpdateSourceArgs":"$.recommended_download",
        "UpdateSourceTarget":"{{$FullBaseDir}}server",
        "UnzipUpdateSource":false,
        "OverwriteExistingFiles":true,
        "UpdateSourceConditionSetting":"ServerBuild",
        "UpdateSourceConditionValue":"recommended_download"
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"FetchURLFromJQ",
        "UpdateSourceData":"https://changelogs-live.fivem.net/api/changelog/versions/win32/server",
        "UpdateSourceArgs":"$.optional_download",
        "UpdateSourceTarget":"{{$FullBaseDir}}server",
        "UnzipUpdateSource":true,
        "OverwriteExistingFiles":true,
        "DeleteAfterExtract":true,
        "UpdateSourceConditionSetting":"ServerBuild",
        "UpdateSourceConditionValue":"optional_download"
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"FetchURLFromJQ",
        "UpdateSourceData":"https://changelogs-live.fivem.net/api/changelog/versions/linux/server",
        "UpdateSourceArgs":"$.optional_download",
        "UpdateSourceTarget":"{{$FullBaseDir}}server",
        "UnzipUpdateSource":false,
        "OverwriteExistingFiles":true,
        "UpdateSourceConditionSetting":"ServerBuild",
        "UpdateSourceConditionValue":"optional_download"
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"FetchURLFromJQ",
        "UpdateSourceData":"https://changelogs-live.fivem.net/api/changelog/versions/win32/server",
        "UpdateSourceArgs":"$.latest_download",
        "UpdateSourceTarget":"{{$FullBaseDir}}server",
        "UnzipUpdateSource":true,
        "OverwriteExistingFiles":true,
        "DeleteAfterExtract":true,
        "UpdateSourceConditionSetting":"ServerBuild",
        "UpdateSourceConditionValue":"latest_download"
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"FetchURLFromJQ",
        "UpdateSourceData":"https://changelogs-live.fivem.net/api/changelog/versions/linux/server",
        "UpdateSourceArgs":"$.latest_download",
        "UpdateSourceTarget":"{{$FullBaseDir}}server",
        "UnzipUpdateSource":false,
        "OverwriteExistingFiles":true,
        "UpdateSourceConditionSetting":"ServerBuild",
        "UpdateSourceConditionValue":"latest_download"
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"FetchURLFromJQ",
        "UpdateSourceData":"https://changelogs-live.fivem.net/api/changelog/versions/win32/server",
        "UpdateSourceArgs":"$.critical_download",
        "UpdateSourceTarget":"{{$FullBaseDir}}server",
        "UnzipUpdateSource":true,
        "OverwriteExistingFiles":true,
        "DeleteAfterExtract":true,
        "UpdateSourceConditionSetting":"ServerBuild",
        "UpdateSourceConditionValue":"critical_download"
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"FetchURLFromJQ",
        "UpdateSourceData":"https://changelogs-live.fivem.net/api/changelog/versions/linux/server",
        "UpdateSourceArgs":"$.critical_download",
        "UpdateSourceTarget":"{{$FullBaseDir}}server",
        "UnzipUpdateSource":false,
        "OverwriteExistingFiles":true,
        "UpdateSourceConditionSetting":"ServerBuild",
        "UpdateSourceConditionValue":"critical_download"
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"FetchURL",
        "UpdateSourceData":"{{SpecificBuildVersionURL}}",
        "UpdateSourceTarget":"{{$FullBaseDir}}server",
        "UnzipUpdateSource":true,
        "OverwriteExistingFiles":true,
        "DeleteAfterExtract":true,
        "UpdateSourceConditionSetting":"ServerBuild",
        "UpdateSourceConditionValue":"SpecificVersion",
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"FetchURL",
        "UpdateSourceData":"{{SpecificBuildVersionURL}}",
        "UpdateSourceTarget":"{{$FullBaseDir}}server",
        "UnzipUpdateSource":false,
        "OverwriteExistingFiles":true,
        "UpdateSourceConditionSetting":"ServerBuild",
        "UpdateSourceConditionValue":"SpecificVersion",
    },
    {
        "UpdateStageName":"Server Extract",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"Executable",
        "UpdateSourceData":"/bin/bash",
        "UpdateSourceArgs":"-c \"cd ./txadmin/server && tar -xf fx.tar.xz && rm -f fx.tar.xz\""
    }
]
